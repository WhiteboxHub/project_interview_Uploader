 <!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; style-src 'self' 'unsafe-inline'; script-src 'self'">
  <title>Interview Recording Uploader</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">
    <!-- Header -->
    <header class="header">
      <h1>üìπ Interview Recording Uploader</h1>
      <div class="header-actions">
        <button id="settingsBtn" class="btn btn-secondary">‚öôÔ∏è Settings</button>
      </div>
    </header>

    <!-- Status Bar -->
    <div class="status-bar">
      <div class="status-item">
        <span class="status-label">API:</span>
        <span id="apiStatus" class="status-value status-disconnected">‚óè Not Authenticated</span>
        <button id="apiConnectBtn" class="btn btn-small">Login</button>
      </div>
      <div class="status-item">
        <span class="status-label">Google Drive:</span>
        <span id="driveStatus" class="status-value status-disconnected">‚óè Not Connected</span>
        <button id="driveAuthBtn" class="btn btn-small">Authenticate</button>
      </div>
      <div class="status-item">
        <span class="status-label">YouTube:</span>
        <span id="youtubeStatus" class="status-value status-disconnected">‚óè Not Connected</span>
        <button id="youtubeAuthBtn" class="btn btn-small">Authenticate</button>
      </div>
    </div>

    <!-- Drop Zone -->
    <div id="dropZone" class="drop-zone">
      <div class="drop-zone-content">
        <div class="drop-icon">üìÅ</div>
        <h2>Drag & Drop Videos Here</h2>
        <p>Supported formats: MP4, MOV, MKV, AVI</p>
        <p class="drop-hint">Videos will be processed automatically</p>
      </div>
    </div>

    <!-- Google-style Upload Bar (Fixed Bottom) -->
    <div class="upload-bar" id="uploadBar" style="display: none;">
      <div class="upload-bar-content">
        <div class="upload-info">
          <div class="upload-icon">
            <svg class="spinner" viewBox="0 0 50 50">
              <circle class="path" cx="25" cy="25" r="20" fill="none" stroke-width="4"></circle>
            </svg>
          </div>
          <div class="upload-details">
            <div class="upload-filename" id="uploadFilename">Processing...</div>
            <div class="upload-status" id="uploadStatus">Preparing upload...</div>
          </div>
        </div>
        <div class="upload-progress-section">
          <div class="upload-percentage" id="uploadPercentage">0%</div>
          <button class="upload-close" id="uploadClose">√ó</button>
        </div>
      </div>
      <div class="upload-progress-bar">
        <div class="upload-progress-fill" id="uploadProgressFill"></div>
      </div>
    </div>

    <!-- Queue Section -->
    <div class="queue-section">
      <div class="queue-header">
        <h3>Processing Queue (<span id="queueCount">0</span>)</h3>
        <button id="clearCompletedBtn" class="btn btn-small btn-secondary">Clear Completed</button>
      </div>
      <div id="queueList" class="queue-list">
        <div class="empty-queue">No videos in queue</div>
      </div>
    </div>
  </div>

  <!-- Settings Modal -->
  <div id="settingsModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Settings</h2>
        <button class="modal-close">&times;</button>
      </div>
      <div class="modal-body">
        <div class="settings-section">
          <h3>Configuration</h3>
          <p style="color: #666; font-size: 14px; margin-bottom: 15px;">
            üìù <strong>API credentials</strong> are configured in <code>.env</code> file<br>
            Edit <code>.env</code> to set API_BASE_URL, API_EMAIL, API_PASSWORD
          </p>
        </div>

        <div class="settings-section">
          <h3>File Paths</h3>
          <div class="form-group">
            <label>Compressed Storage:</label>
            <div class="input-group">
              <input type="text" id="compressedStorage" placeholder="D:\InterviewBackups\Compressed">
              <button class="btn btn-small" id="browseCompressed">Browse</button>
            </div>
          </div>
          <small style="color: #666; font-size: 12px; margin-top: 10px; display: block;">
            üìÅ <strong>Note:</strong> Google Drive Folder ID is set in <code>.env</code> file<br>
            Set <code>GOOGLE_DRIVE_FOLDER_ID</code> or leave empty for auto-create
          </small>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" id="cancelSettings">Cancel</button>
        <button class="btn btn-primary" id="saveSettings">Save</button>
      </div>
    </div>
  </div>

  <!-- Interview ID Modal -->
  <div id="idModal" class="modal">
    <div class="modal-content modal-small">
      <div class="modal-header">
        <h2>Enter Interview ID</h2>
      </div>
      <div class="modal-body">
        <p class="modal-file-name">File: <span id="currentFileName"></span></p>
        <div class="form-group">
          <label>Interview ID:</label>
          <input type="number" id="interviewId" placeholder="e.g., 2671" autofocus>
        </div>
        <div id="idError" class="error-message" style="display: none;"></div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" id="cancelId">Cancel</button>
        <button class="btn btn-primary" id="submitId">Submit</button>
      </div>
    </div>
  </div>

  <!-- Preview Modal -->
  <div id="previewModal" class="modal">
    <div class="modal-content modal-small">
      <div class="modal-header">
        <h2>Confirm Interview Details</h2>
      </div>
      <div class="modal-body">
        <div class="preview-details">
          <div class="preview-row">
            <span class="preview-label">Interview ID:</span>
            <span id="previewId" class="preview-value"></span>
          </div>
          <div class="preview-row">
            <span class="preview-label">Candidate:</span>
            <span id="previewCandidate" class="preview-value"></span>
          </div>
          <div class="preview-row">
            <span class="preview-label">Company:</span>
            <span id="previewCompany" class="preview-value"></span>
          </div>
          <div class="preview-row">
            <span class="preview-label">Type:</span>
            <span id="previewType" class="preview-value"></span>
          </div>
          <div class="preview-row">
            <span class="preview-label">Date:</span>
            <span id="previewDate" class="preview-value"></span>
          </div>
        </div>
        <div class="preview-filename">
          <p><strong>File will be renamed to:</strong></p>
          <p id="previewFilename" class="filename-display"></p>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" id="cancelPreview">Cancel</button>
        <button class="btn btn-primary" id="confirmPreview">Continue</button>
      </div>
    </div>
  </div>

  <!-- Auth Code Modal -->
  <div id="authModal" class="modal">
    <div class="modal-content modal-small">
      <div class="modal-header">
        <h2 id="authModalTitle">Enter Authorization Code</h2>
      </div>
      <div class="modal-body">
        <p id="authModalInstructions" style="margin-bottom: 15px; line-height: 1.5;"></p>
        <div class="form-group">
          <label>Authorization Code:</label>
          <textarea id="authCode" rows="4" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; font-family: monospace; font-size: 12px;" placeholder="Paste code here (e.g., 4/0AX4XfW...)"></textarea>
        </div>
        <div id="authError" class="error-message" style="display: none;"></div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" id="authCancel">Cancel</button>
        <button class="btn btn-primary" id="authSubmit">Submit</button>
      </div>
    </div>
  </div>

  <script src="renderer.js"></script>
</body>
</html>
